namespace = forbidden_city

# Site identified
forbidden_city.1 = {
	type = country_event

	title = forbidden_city.1.t
	desc = forbidden_city.1.d
	flavor = forbidden_city.1.f

	placement = scope:forbidden_city_site

	event_image = {
		video = "europenorthamerica_capitalists_meeting"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_map.dds"

	duration = 3

	trigger = {
		# triggered by je_forbidden_city_site
	}

	immediate = {
		random_scope_state = {
			limit = {
				is_incorporated = yes
				is_split_state = no
				any_scope_building = {
					is_building_type = building_barracks
					level >= 100
				}
			}
			save_scope_as = forbidden_city_site
		}
	}

	option = {
		name = forbidden_city.1.a
        	default_option = yes
        	scope:forbidden_city_site = {
        		add_modifier = {
        			name = forbidden_city_site
        		}
        	}
        	show_as_tooltip = {
        		remove_modifier = forbidden_city_survey
        	}
        	add_journal_entry = {
        		type = je_forbidden_city_construction
        		target = scope:forbidden_city_site
        	}
	}
}